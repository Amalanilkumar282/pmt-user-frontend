<div class="details-overlay" (click)="onClose()">
  <div class="details-container" (click)="$event.stopPropagation()">
    <!-- Header -->
    <div class="details-header">
      <div class="header-left">
        <div class="team-icon-large">{{ getInitials(team.name) }}</div>
        <div class="header-info">
          <h2 class="team-name">{{ team.name }}</h2>
          <span class="project-name">{{ team.projectName }}</span>
        </div>
      </div>
      <div class="header-actions">
        <span class="status-badge" [class.active]="team.status === 'Active'" [class.inactive]="team.status === 'Inactive'">
          {{ team.status }}
        </span>
        <button class="action-btn" (click)="onEdit()" title="Edit team">
          <i class="fa-solid fa-pen-to-square"></i>
        </button>
        <button class="close-btn" (click)="onClose()" aria-label="Close">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
    </div>

    <!-- Content -->
    <div class="details-content">
      <!-- Description -->
      <div class="section">
        <h3 class="section-title">Description</h3>
        <p class="description-text">{{ team.description }}</p>
      </div>

      <!-- Statistics -->
      <div class="section">
        <h3 class="section-title">Team Statistics</h3>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon" style="background: #dbeafe; color: #2563eb;">
              <i class="fa-solid fa-users"></i>
            </div>
            <div class="stat-value">{{ stats.totalMembers }}</div>
            <div class="stat-label">Team Members</div>
          </div>

          <div class="stat-card">
            <div class="stat-icon" style="background: #dcfce7; color: #16a34a;">
              <i class="fa-solid fa-spinner"></i>
            </div>
              <div class="stat-value">{{ team.activeSprintsCount ?? 0 }}</div>
            <div class="stat-label">Active Sprints</div>
          </div>

          <div class="stat-card">
            <div class="stat-icon" style="background: #fef3c7; color: #d97706;">
              <i class="fa-solid fa-circle-check"></i>
            </div>
              <div class="stat-value">{{ team.completedSprintsCount ?? 0 }}</div>
            <div class="stat-label">Completed Sprints</div>
          </div>
        </div>
      </div>

      <!-- Team Lead -->
      <div class="section">
        <h3 class="section-title">Team Lead</h3>
        <div class="member-card lead-card">
          <div class="member-avatar">{{ getInitials(team.lead.name) }}</div>
          <div class="member-info">
            <div class="member-name">{{ team.lead.name }}</div>
            <div class="member-email">{{ team.lead.email }}</div>
          </div>
          <span class="role-badge" [style.background]="getRoleColor(team.lead.role)">
            {{ team.lead.role }}
          </span>
        </div>
      </div>

      <!-- Team Members -->
      <div class="section">
        <h3 class="section-title">Team Members ({{ team.members.length - 1 }})</h3>
        <div class="members-list">
          @for (member of team.members; track member.id) {
            @if (member.id !== team.lead.id) {
              <div class="member-card">
                <div class="member-avatar">{{ getInitials(member.name) }}</div>
                <div class="member-info">
                  <div class="member-name">{{ member.name }}</div>
                  <div class="member-email">{{ member.email }}</div>
                </div>
                <span class="role-badge" [style.background]="getRoleColor(member.role)">
                  {{ member.role }}
                </span>
              </div>
            }
          }
        </div>
      </div>

      <!-- Tags -->
      @if (team.tags && team.tags.length > 0) {
        <div class="section">
          <h3 class="section-title">Tags</h3>
          <div class="tags">
            @for (tag of team.tags; track tag) {
              <span class="tag">{{ tag }}</span>
            }
          </div>
        </div>
      }

      <!-- Metadata -->
      <div class="section">
        <h3 class="section-title">Information</h3>
        <div class="metadata-grid">
          <div class="metadata-item">
            <span class="metadata-label">Created</span>
            <span class="metadata-value">{{ formatDate(team.createdAt) }}</span>
          </div>
          <div class="metadata-item">
            <span class="metadata-label">Last Updated</span>
            <span class="metadata-value">{{ formatDate(team.updatedAt) }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
