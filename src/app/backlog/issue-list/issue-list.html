<div class="space-y-2">
  @if (issues$().length === 0) {
    <div class="text-center py-8 text-gray-500">
      <p class="text-lg">No issues yet</p>
      <p class="text-sm">Add issues to get started</p>
    </div>
  } @else {
    @for (issue of issues$(); track issue.id) {
      <div 
        cdkDrag
        [cdkDragDisabled]="isReadOnly"
        [cdkDragData]="issue"
        [class]="'issue-card ' + (issue.status === 'DONE' ? 'completed-issue' : '') + (isReadOnly ? ' read-only' : '')"
        (click)="onIssueClick(issue)"
        (cdkDragStarted)="onDragStarted()"
        (cdkDragEnded)="onDragEnded()">
        
        <div class="flex items-center justify-between gap-3">
          <!-- Left side: Icon, ID, Title -->
          <div class="flex items-center gap-2 flex-1 min-w-0">
            <i [class]="getTypeIcon(issue.type)" class="flex-shrink-0"></i>
            <span [class]="'text-xs font-semibold flex-shrink-0 ' + (issue.status === 'DONE' ? 'text-green-600' : 'text-gray-500')">{{ issue.key || issue.id }}</span>
            <h4 [class]="'font-medium text-sm truncate ' + (issue.status === 'DONE' ? 'text-green-700 line-through' : 'text-gray-900')">
              {{ issue.title }}
            </h4>
            @if (issue.status === 'DONE') {
              <i class="fa-solid fa-circle-check text-green-600 completed-badge-inline"></i>
            }
          </div>
          
          <!-- Right side: Metadata -->
          <div class="flex items-center gap-2 flex-shrink-0">
            <span [class]="'px-2 py-0.5 rounded text-xs font-medium ' + getPriorityClass(issue.priority)">
              {{ issue.priority }}
            </span>
            
            @if (issue.storyPoints) {
              <span [class]="'text-xs font-semibold px-2 py-0.5 rounded ' + (issue.status === 'DONE' ? 'text-green-700 bg-green-100' : 'text-gray-600 bg-gray-100')">
                {{ issue.storyPoints }} SP
              </span>
            }
            
            @if (issue.assigneeName || issue.assignee || issue.assigneeId) {
              <span [class]="'w-6 h-6 text-white rounded-full flex items-center justify-center text-xs font-semibold flex-shrink-0 ' + (issue.status === 'DONE' ? 'bg-green-500' : 'bg-blue-500')">
                {{ (issue.assigneeName || issue.assignee || 'U').charAt(0).toUpperCase() }}
              </span>
            }
            
            <span [class]="'px-2 py-0.5 rounded text-xs font-medium ' + (issue.status === 'DONE' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600')">
              {{ issue.status.replace('_', ' ') }}
            </span>
          </div>
        </div>
      </div>
    }
  }
</div>
