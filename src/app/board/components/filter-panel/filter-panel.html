<div class="relative inline-block">
	<button (click)="togglePanel()" class="flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-200 bg-white text-sm font-medium text-slate-700 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:border-transparent transition-colors">
		<svg class="w-4 h-4 text-slate-500" viewBox="0 0 20 20" fill="currentColor">
			<path fill-rule="evenodd" d="M2.628 1.601C5.028 1.206 7.49 1 10 1s4.973.206 7.372.601a.75.75 0 01.628.74v2.288a2.25 2.25 0 01-.659 1.59l-4.682 4.683a2.25 2.25 0 00-.659 1.59v3.037c0 .684-.31 1.33-.844 1.757l-1.937 1.55A.75.75 0 018 18.25v-5.757a2.25 2.25 0 00-.659-1.591L2.659 6.22A2.25 2.25 0 012 4.629V2.34a.75.75 0 01.628-.74z" clip-rule="evenodd"/>
		</svg>
		<span>Filter</span>
		<svg class="w-3 h-3 text-slate-400" viewBox="0 0 20 20" fill="currentColor">
			<path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.08 1.04l-4.25 4.25a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd"/>
		</svg>
	</button>

	<div *ngIf="isOpen" class="absolute left-0 z-30 mt-2 w-96 rounded-xl border border-slate-200 bg-white p-0 shadow-lg" appClickOutside (outsideClick)="isOpen=false">
		<div class="grid grid-cols-3">
			<!-- Left nav -->
			<div class="col-span-1 border-r border-slate-100 p-4">
				<nav class="flex flex-col gap-2 text-sm">
					<button [class.font-medium]="activeField === 'assignees'" class="text-left px-3 py-2 rounded" (click)="selectField('assignees')">Assignee</button>
					<button [class.font-medium]="activeField === 'workTypes'" class="text-left px-3 py-2 rounded" (click)="selectField('workTypes')">Work Type</button>
					<button [class.font-medium]="activeField === 'labels'" class="text-left px-3 py-2 rounded" (click)="selectField('labels')">Labels</button>
					<button [class.font-medium]="activeField === 'statuses'" class="text-left px-3 py-2 rounded" (click)="selectField('statuses')">Status</button>
					<button [class.font-medium]="activeField === 'priorities'" class="text-left px-3 py-2 rounded" (click)="selectField('priorities')">Priority</button>
				</nav>
			</div>

			<!-- Right content -->
			<div class="col-span-2 p-4">
				<div *ngIf="!activeField" class="text-sm text-slate-400">Select a field to start creating a filter</div>

				<!-- Assignee view -->
				<div *ngIf="activeField === 'assignees'">
					<input class="w-full rounded-md border border-slate-100 px-3 py-2 mb-3 text-sm" placeholder="Search Assignee" />
					<div class="flex flex-col gap-2">
						<label *ngFor="let a of assignees()" class="flex items-center gap-2">
							<input type="checkbox" [checked]="isSelected('assignees', a)" (change)="toggle('assignees', a)" />
							<span class="text-sm">{{ a }}</span>
						</label>
					</div>
				</div>

				<!-- Work Type view -->
				<div *ngIf="activeField === 'workTypes'">
					<input class="w-full rounded-md border border-slate-100 px-3 py-2 mb-3 text-sm" placeholder="Search Work Type" />
					<div class="text-sm text-slate-400">No work types found</div>
				</div>

				<!-- Labels view -->
				<div *ngIf="activeField === 'labels'">
					<input class="w-full rounded-md border border-slate-100 px-3 py-2 mb-3 text-sm" placeholder="Search Labels" />
					<div class="flex flex-col gap-2">
						<label *ngFor="let l of labels()" class="flex items-center gap-2">
							<input type="checkbox" [checked]="isSelected('labels', l)" (change)="toggle('labels', l)" />
							<span class="text-sm">{{ l }}</span>
						</label>
					</div>
				</div>

				<!-- Status view -->
				<div *ngIf="activeField === 'statuses'">
					<div class="flex flex-col gap-2">
						<label *ngFor="let s of statuses()" class="flex items-center gap-2">
							<input type="checkbox" [checked]="isSelected('statuses', s)" (change)="toggle('statuses', s)" />
							<span class="text-sm">{{ s }}</span>
						</label>
					</div>
				</div>

				<!-- Priority view -->
				<div *ngIf="activeField === 'priorities'">
					<input class="w-full rounded-md border border-slate-100 px-3 py-2 mb-3 text-sm" placeholder="Search Priority" />
					<div class="flex flex-col gap-2">
						<label *ngFor="let p of priorities()" class="flex items-center gap-2">
							<input type="checkbox" [checked]="isSelected('priorities', p)" (change)="toggle('priorities', p)" />
							<span class="text-sm">{{ p }}</span>
						</label>
					</div>
				</div>

			</div>
		</div>
		<div class="p-3 text-right border-t border-slate-100">
			<button class="btn-secondary" (click)="togglePanel()">Close</button>
		</div>
	</div>
</div>

