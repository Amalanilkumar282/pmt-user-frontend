<div class="relative inline-block">
	<button (click)="togglePanel()" class="flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-200 bg-white text-xs font-medium text-slate-700 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:border-transparent transition-colors">
		<svg class="w-4 h-4 text-slate-500" viewBox="0 0 20 20" fill="currentColor">
			<path fill-rule="evenodd" d="M2.628 1.601C5.028 1.206 7.49 1 10 1s4.973.206 7.372.601a.75.75 0 01.628.74v2.288a2.25 2.25 0 01-.659 1.59l-4.682 4.683a2.25 2.25 0 00-.659 1.59v3.037c0 .684-.31 1.33-.844 1.757l-1.937 1.55A.75.75 0 018 18.25v-5.757a2.25 2.25 0 00-.659-1.591L2.659 6.22A2.25 2.25 0 012 4.629V2.34a.75.75 0 01.628-.74z" clip-rule="evenodd"/>
		</svg>
		<span>Filter</span>
		<svg class="w-3 h-3 text-slate-400" viewBox="0 0 20 20" fill="currentColor">
			<path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.08 1.04l-4.25 4.25a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd"/>
		</svg>
	</button>

	<!-- Filter Panel - Positioned to center on button -->
	<div *ngIf="isOpen" class="filter-panel-dropdown" appClickOutside (outsideClick)="isOpen=false">
		<!-- Close button in top right -->
		<button class="filter-close-btn" (click)="togglePanel()" type="button">
			<svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor">
				<path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"/>
			</svg>
		</button>
		
		<div class="filter-content">
		<!-- Left nav -->
		<div class="filter-nav">
			<button 
				*ngFor="let field of filterFields"
				[class.active]="activeField === field"
				class="filter-nav-item"
				(click)="selectField(field)">
				{{ field === 'assignees' ? 'Assignee' : 
				   field === 'workTypes' ? 'Work Type' : 
				   field === 'labels' ? 'Labels' : 
				   field === 'statuses' ? 'Status' : 'Priority' }}
			</button>
			
			<!-- Clear All Filters button at bottom -->
			<button 
				class="filter-clear-btn"
				(click)="clearAllFilters()"
				type="button">
				<svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor">
					<path fill-rule="evenodd" d="M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z" clip-rule="evenodd"/>
				</svg>
				Clear
			</button>
		</div>			<!-- Right content with scrollable area -->
			<div class="filter-values">
				<div *ngIf="!activeField" class="text-sm text-slate-400 p-4">
					Select a field to start creating a filter
				</div>

				<!-- Assignee view -->
				<div *ngIf="activeField === 'assignees'" class="filter-section">
					<div class="filter-search">
						<svg class="search-icon" viewBox="0 0 20 20" fill="currentColor">
							<path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"/>
						</svg>
						<input 
							type="text"
							class="filter-search-input"
							placeholder="Search Assignee"
							[(ngModel)]="assigneeSearch"
							[ngModelOptions]="{updateOn: 'change'}" />
					</div>
					<div class="filter-list">
					<label *ngFor="let a of assignees()" class="filter-item">
						<input 
							type="checkbox" 
							class="filter-checkbox"
							[checked]="isSelected('assignees', a)" 
							(change)="toggle('assignees', a)" />
						<div class="flex items-center gap-2 flex-1">
							<div class="w-6 h-6 rounded-full flex items-center justify-center text-white text-[10px] font-bold"
								 [style.background-color]="a | avatarClass">
								{{ a | initials }}
							</div>
							<span class="text-sm text-slate-700">{{ a }}</span>
						</div>
					</label>
						<div *ngIf="assignees().length === 0" class="text-sm text-slate-400 p-4">
							No assignees found
						</div>
					</div>
				</div>

				<!-- Work Type view -->
				<div *ngIf="activeField === 'workTypes'" class="filter-section">
					<div class="filter-search">
						<svg class="search-icon" viewBox="0 0 20 20" fill="currentColor">
							<path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"/>
						</svg>
						<input 
							type="text"
							class="filter-search-input"
							placeholder="Search Work Type"
							[(ngModel)]="workTypeSearch"
							[ngModelOptions]="{updateOn: 'change'}" />
					</div>
					<div class="filter-list">
						<label *ngFor="let w of workTypes()" class="filter-item">
							<input 
								type="checkbox"
								class="filter-checkbox"
								[checked]="isSelected('workTypes', w)" 
								(change)="toggle('workTypes', w)" />
							<span class="text-sm text-slate-700 flex-1">{{ w }}</span>
						</label>
						<div *ngIf="workTypes().length === 0" class="text-sm text-slate-400 p-4">
							No work types found
						</div>
					</div>
				</div>

				<!-- Labels view -->
				<div *ngIf="activeField === 'labels'" class="filter-section">
					<div class="filter-search">
						<svg class="search-icon" viewBox="0 0 20 20" fill="currentColor">
							<path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"/>
						</svg>
						<input 
							type="text"
							class="filter-search-input"
							placeholder="Search Labels"
							[(ngModel)]="labelSearch"
							[ngModelOptions]="{updateOn: 'change'}" />
					</div>
					<div class="filter-list">
						<label *ngFor="let l of labels()" class="filter-item">
							<input 
								type="checkbox"
								class="filter-checkbox"
								[checked]="isSelected('labels', l)" 
								(change)="toggle('labels', l)" />
							<span class="text-sm text-slate-700 flex-1">{{ l }}</span>
						</label>
						<div *ngIf="labels().length === 0" class="text-sm text-slate-400 p-4">
							No labels found
						</div>
					</div>
				</div>

				<!-- Status view -->
				<div *ngIf="activeField === 'statuses'" class="filter-section">
					<div class="filter-list">
						<label *ngFor="let s of statuses()" class="filter-item">
							<input 
								type="checkbox"
								class="filter-checkbox"
								[checked]="isSelected('statuses', s)" 
								(change)="toggle('statuses', s)" />
							<span class="text-sm text-slate-700 flex-1">{{ s }}</span>
						</label>
					</div>
				</div>

				<!-- Priority view -->
				<div *ngIf="activeField === 'priorities'" class="filter-section">
					<div class="filter-search">
						<svg class="search-icon" viewBox="0 0 20 20" fill="currentColor">
							<path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"/>
						</svg>
						<input 
							type="text"
							class="filter-search-input"
							placeholder="Search Priority"
							[(ngModel)]="prioritySearch"
							[ngModelOptions]="{updateOn: 'change'}" />
					</div>
					<div class="filter-list">
						<label *ngFor="let p of priorities()" class="filter-item">
							<input 
								type="checkbox"
								class="filter-checkbox"
								[checked]="isSelected('priorities', p)" 
								(change)="toggle('priorities', p)" />
							<span class="text-sm text-slate-700 flex-1">{{ p }}</span>
						</label>
						<div *ngIf="priorities().length === 0" class="text-sm text-slate-400 p-4">
							No priorities found
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
