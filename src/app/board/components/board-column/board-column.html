<!-- board-column.component.html -->
<div class="board-column rounded-2xl bg-slate-50 p-3">
  <div class="mb-2 flex items-center justify-between">
    <div class="text-xs font-semibold uppercase tracking-wide text-slate-500">{{ def.title }}</div>
    <div class="flex items-center gap-2">
      <div class="rounded-full bg-white px-2 py-0.5 text-xs text-slate-500 shadow">{{ items.length }}</div>
      <!-- delete button: subtle gray, blue on hover -->
      <button
        aria-label="Delete column"
        title="Delete column"
        (click)="onDeleteColumn()"
        class="text-slate-400 hover:text-blue-500 focus:outline-none"
        >
        <!-- simple X icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  </div>

  <div
    cdkDropList
    [id]="def.id"
    [cdkDropListData]="items"
    [cdkDropListConnectedTo]="connectedTo"
    (cdkDropListDropped)="drop($event)"
    class="min-h-16 space-y-3 max-h-[60vh] overflow-y-auto pr-2">

    <app-task-card
      *ngFor="let issue of pageItems; trackBy: trackById"
      cdkDrag
      [issue]="issue"
      [colorClass]="def.color"
      (open)="onOpen($event)">
    </app-task-card>
    
    <!-- spacer to ensure last task is fully scrollable into view -->
    <div class="column-end-spacer" aria-hidden="true"></div>
  </div>

  <button *ngIf="items.length > pageItems.length"
    (click)="loadMore()"
    class="mt-3 w-full rounded-lg border border-slate-200 bg-white py-2 text-sm hover:bg-slate-50">
    Load more
  </button>
</div>

