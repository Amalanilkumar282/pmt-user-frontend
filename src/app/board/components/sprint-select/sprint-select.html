<!-- sprint-select.component.html -->
<div class="relative" appClickOutside (outsideClick)="open=false">
  <button (click)="open = !open"
    class="flex items-center gap-2 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm shadow-sm cursor-pointer">
    <div class="flex flex-col text-left">
      <div class="font-medium text-sm">{{ getCurrentLabel() }}</div>
      <div class="text-xs text-slate-400">{{ selectedRange }}</div>
    </div>
  <svg class="w-4 h-4 opacity-60" viewBox="0 0 20 20" fill="currentColor"><path d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.08 1.04l-4.25 4.25a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"/></svg>
  </button>
  <div *ngIf="open" class="absolute z-20 mt-2 w-56 rounded-xl border border-slate-200 bg-white p-1 shadow-lg">
    <div class="px-3 py-2 text-xs uppercase tracking-wide text-slate-400">Select Sprint</div>
    <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-slate-50 cursor-pointer"
            (click)="select.emit('BACKLOG'); open=false">Backlog</button>
    <ng-container *ngFor="let s of sprints">
      <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-slate-50 cursor-pointer"
              (click)="select.emit(s.id); open=false">
        <div class="font-medium">{{ s.name }}</div>
        <div class="text-xs text-slate-400">{{ s.startDate | date:'MMM d' }} - {{ s.endDate | date:'MMM d' }}</div>
      </button>
    </ng-container>
  </div>
</div>
