<div class="page-container">
  <app-sidebar></app-sidebar>

  <div class="main-content" [class.collapsed]="isCollapsed()">
    <app-header></app-header>

    <main class="p-8">
      <app-project-header (createProject)="createProject()"></app-project-header>

      <!-- Loading State -->
      <div *ngIf="isLoading()" class="bg-white rounded-xl border border-gray-200 shadow-sm p-12">
        <div class="flex flex-col items-center justify-center space-y-4">
          <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
          <p class="text-gray-600">Loading projects...</p>
        </div>
      </div>

      <!-- Error State -->
      <div *ngIf="!isLoading() && errorMessage()" class="bg-white rounded-xl border border-red-200 shadow-sm p-8">
        <div class="flex flex-col items-center justify-center space-y-4">
          <svg class="h-16 w-16 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          <p class="text-red-600 font-medium">{{ errorMessage() }}</p>
          <button 
            (click)="ngOnInit()" 
            class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
          >
            Retry
          </button>
        </div>
      </div>

      <!-- Projects List -->
      <div *ngIf="!isLoading() && !errorMessage()" class="bg-white rounded-xl border border-gray-200 shadow-sm">
        <app-project-filters
          [searchQuery]="searchQuery"
          [selectedStatus]="selectedStatus"
          [selectedDU]="selectedDU"
          (searchQueryChange)="searchQuery = $event; filterProjects()"
          (statusFilterChange)="onStatusFilterChange($event)"
          (duFilterChange)="onDUFilterChange($event)"
        ></app-project-filters>

        <app-project-list
          [projects]="projects()"
          [filteredProjects]="filteredProjects()"
          [showStarredOnly]="showStarredOnly"
          (projectAction)="toggleProjectStar($event.projectId)"
          (starFilterToggle)="toggleStarredFilter()"
        ></app-project-list>
      </div>
    </main>
  </div>
</div>
