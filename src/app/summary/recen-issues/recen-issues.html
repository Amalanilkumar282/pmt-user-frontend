<div class="bg-white rounded-[14px] shadow-[0_0.7px_2.1px_0_rgba(0,0,0,0.1)] p-4">
  <div
    class="h-1 bg-gradient-to-r from-primary-gradient-start to-primary-gradient-end rounded-t-[14px] -mx-4 -mt-4 mb-4"
  ></div>

  <h3
    class="text-text-primary text-[17px] font-bold leading-[18px] mb-4"
    data-testid="issues-title"
  >
    Recent Issues
  </h3>

  <div class="space-y-0">
    <div
      *ngFor="let issue of issues; let last = last; let i = index"
      [class.border-b]="!last"
      class="py-3 flex items-center justify-between border-gray-200 relative group"
      [attr.data-testid]="'issue-row-' + i"
    >
      <div class="flex w-full items-center justify-between relative">
        <div class="flex flex-col">
          <div class="flex items-center gap-2 mb-1">
            <div
              [style.background-color]="issue.statusBg"
              class="rounded-sm w-4 h-4 flex items-center justify-center"
              data-testid="status-icon"
            >
              <span class="text-white text-[6px] font-bold font-roboto">
                {{ issue.statusLetter }}
              </span>
            </div>

            <span class="text-status-blue text-sm font-medium leading-4" data-testid="issue-title">
              {{ issue.title }}
            </span>
          </div>

          <span class="text-text-secondary text-[9px] leading-3 ml-6" data-testid="issue-code">
            {{ issue.code }}
          </span>
        </div>

        <div
          [style.background-color]="issue.assigneeBg"
          class="w-[17px] h-[17px] rounded-full flex items-center justify-center"
          data-testid="assignee-icon"
        >
          <span class="text-white text-[7px] font-bold font-roboto">
            {{ issue.assigneeInitials }}
          </span>
        </div>

        <div
          class="absolute bottom-full left-1/2 -translate-x-1/2 mb-1 w-64 p-3 rounded-md bg-gray-800 text-white text-xs shadow-lg opacity-0 group-hover:opacity-100 transition-opacity z-20"
          data-testid="issue-tooltip"
        >
          <p class="font-semibold text-sm mb-1" data-testid="tooltip-title">{{ issue.title }}</p>

          <p class="text-gray-200 mb-2" data-testid="tooltip-description">
            {{ issue.description }}
          </p>

          <div class="flex justify-between text-gray-300">
            <span data-testid="tooltip-status"
              ><span class="font-semibold">Status:</span> {{ issue.status }}</span
            >
            <span data-testid="tooltip-priority"
              ><span class="font-semibold">Priority:</span> {{ issue.priority }}</span
            >
          </div>

          <div
            class="absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-8 border-transparent border-t-gray-800"
          ></div>
        </div>
      </div>
    </div>
  </div>
</div>
