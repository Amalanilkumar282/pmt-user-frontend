<div class="relative flex items-center h-8">
  <button class="btn-secondary relative w-7 h-7 flex items-center justify-center mr-0.5" (click)="notificationClick.emit()" aria-label="Notifications">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 2C8.686 2 6 4.686 6 8v5c0 .553-.447 1-1 1H4c-.553 0-1 .447-1 1v1c0 .553.447 1 1 1h16c.553 0 1-.447 1-1v-1c0-.553-.447-1-1-1h-1c-.553 0-1-.447-1-1V8c0-3.314-2.686-6-6-6zm0 20c1.104 0 2-.896 2-2h-4c0 1.104.896 2 2 2z" fill="#3D62A8"/>
    </svg>
    <span *ngIf="unreadCount > 0" class="absolute -top-1 -right-2 min-w-[18px] h-[18px] bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center px-1 border-2 border-white pointer-events-none">{{ unreadCount }}</span>
  </button>
  <div *ngIf="showNotificationModal" class="fixed inset-0 z-[1999]" (click)="closeNotificationModal.emit()">
    <div class="absolute top-16 right-0 min-w-[300px] max-w-[400px] bg-white rounded-lg shadow-2xl px-7 py-4" (click)="$event.stopPropagation()">
      <div class="flex justify-between items-center mb-2">
        <h3 class="text-2xl font-semibold">Notifications</h3>
        <button (click)="closeNotificationModal.emit()" class="bg-none border-none text-lg cursor-pointer">&times;</button>
      </div>
      <div *ngIf="notifications.length; else noNotifications" class="max-h-[320px] overflow-y-auto">
        <ul>
          <li *ngFor="let n of notifications" class="mb-3 pb-2 border-b border-gray-200">
            <div class="font-semibold text-[#3D62A8] text-base flex items-center gap-1.5">
              <span *ngIf="n.unread" class="inline-block w-2 h-2 rounded-full bg-blue-600"></span>
              {{ n.title }}
            </div>
            <div class="text-sm text-gray-700">{{ n.message }}</div>
            <div class="text-xs text-gray-400 mt-1">{{ n.time }}</div>
          </li>
        </ul>
      </div>
      <ng-template #noNotifications>
        <div class="text-gray-500 text-sm">No notifications.</div>
      </ng-template>
    </div>
  </div>
</div>
